{"ast":null,"code":"import Nav from\"../nav/Nav\";import Card from\"../card/Card\";import style from\"./cards.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{getAllVideogames,updateRenderArray}from\"../../redux/actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Cards=()=>{const dispatch=useDispatch();useEffect(()=>{dispatch(getAllVideogames());},[dispatch]);const[page,setPage]=useState(1);const[selectedGenre,setSelectedGenre]=useState(\"\");const[selectedSource,setSelectedSource]=useState(\"\");const[selectedSort,setSelectedSort]=useState(\"\");const toRenderArray=useSelector(state=>state.toRenderArray);const allVideogamesArray=useSelector(state=>state.allVideogamesArray);useEffect(()=>{if(allVideogamesArray.length>0){console.log(\"allVideogamesArray is now filled:\",typeof allVideogamesArray);}},[allVideogamesArray]);const[pages,setPages]=useState(Math.ceil(allVideogamesArray.length/15));const onSearch=async name=>{try{const response=await axios(\"videogames/search/?name=\".concat(name));const data=response.data;if(!data.length){window.alert(\"Try another name!\");}else{dispatch(updateRenderArray(data));}}catch(error){console.error(\"Error fetching search results:\",error);window.alert(\"no videgames found\");}};const handleGenresChange=event=>{setSelectedGenre(event.target.value);};const handleSelectedSortOptionChange=event=>{setSelectedSort(event.target.value);};const handleDataSourceChange=event=>{setSelectedSource(event.target.value);};const handleLast=()=>{setPage(pages);};const handleNext=()=>{setPage(page+1);};const handlePrev=()=>{setPage(page-1);};const handleFirst=()=>{setPage(1);};let midRender=toRenderArray||allVideogamesArray;if(selectedGenre!==\"all\"&&selectedGenre!==\"\"){midRender=midRender.filter(game=>{return game.genres.some(genre=>genre.name===selectedGenre);});}switch(selectedSort){case\"RatingD\":midRender=midRender.sort((a,b)=>b.rating-a.rating);break;case\"RatingA\":midRender=midRender.sort((a,b)=>a.rating-b.rating);break;case\"AlfaA\":midRender=midRender.sort((a,b)=>b.name.localeCompare(a.name));break;case\"AlfaD\":midRender=midRender.sort((a,b)=>a.name.localeCompare(b.name));break;case\"default\":midRender=allVideogamesArray;break;default:break;}switch(selectedSource){case\"DB\":midRender=midRender.filter(game=>typeof game.id==\"string\");break;case\"API\":midRender=midRender.filter(game=>typeof game.id==\"number\");break;case\"all\":midRender=allVideogamesArray;break;default:break;}console.log(\"midRender:\",midRender);let finalRender=midRender.slice(page*15-15,page*15);useEffect(()=>{setPages(Math.ceil(allVideogamesArray.length/15));},[finalRender,allVideogamesArray.length]);return/*#__PURE__*/_jsxs(\"main\",{className:style.main,children:[/*#__PURE__*/_jsx(Nav,{handleGenresChange:handleGenresChange,handleSelectedSortOptionChange:handleSelectedSortOptionChange,handleDataSourceChange:handleDataSourceChange,onSearch:onSearch}),/*#__PURE__*/_jsx(\"section\",{className:style.cards,children:allVideogamesArray.length?finalRender.map(_ref=>{let{id,name,genres,background_image,image}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:style.card,children:/*#__PURE__*/_jsx(Card,{id:id,name:name,genres:genres,image:background_image||image})},id);}):/*#__PURE__*/_jsx(\"div\",{className:style.loading,children:\"LOADING\"})}),/*#__PURE__*/_jsxs(\"section\",{className:style.paginado,children:[page!==1&&/*#__PURE__*/_jsx(\"button\",{className:style.btn,onClick:handleFirst,children:\"\\u21E4\"}),page!==1&&page!==2&&/*#__PURE__*/_jsx(\"button\",{className:style.btn,onClick:handlePrev,children:\"\\u2190\"}),page!==pages&&page!==pages-1&&/*#__PURE__*/_jsx(\"button\",{className:style.btn,onClick:handleNext,children:\"\\u2192\"}),page!==pages&&/*#__PURE__*/_jsx(\"button\",{className:style.btn,onClick:handleLast,children:\"\\u21E5\"})]})]});};export default Cards;","map":{"version":3,"names":["Nav","Card","style","useSelector","useDispatch","useEffect","useState","axios","getAllVideogames","updateRenderArray","jsx","_jsx","jsxs","_jsxs","Cards","dispatch","page","setPage","selectedGenre","setSelectedGenre","selectedSource","setSelectedSource","selectedSort","setSelectedSort","toRenderArray","state","allVideogamesArray","length","console","log","pages","setPages","Math","ceil","onSearch","name","response","concat","data","window","alert","error","handleGenresChange","event","target","value","handleSelectedSortOptionChange","handleDataSourceChange","handleLast","handleNext","handlePrev","handleFirst","midRender","filter","game","genres","some","genre","sort","a","b","rating","localeCompare","id","finalRender","slice","className","main","children","cards","map","_ref","background_image","image","card","loading","paginado","btn","onClick"],"sources":["/home/diego/Documentos/diego/proyectosHenry/videogames_pi/client/src/components/cards/Cards.jsx"],"sourcesContent":["import Nav from \"../nav/Nav\";\nimport Card from \"../card/Card\";\nimport style from \"./cards.module.css\";\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { getAllVideogames, updateRenderArray } from \"../../redux/actions\";\n\nconst Cards = () => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(getAllVideogames());\n    }, [dispatch]);\n    const [page, setPage] = useState(1);\n    const [selectedGenre, setSelectedGenre] = useState(\"\");\n    const [selectedSource, setSelectedSource] = useState(\"\");\n    const [selectedSort, setSelectedSort] = useState(\"\");\n    const toRenderArray = useSelector((state) => state.toRenderArray);\n\n    const allVideogamesArray = useSelector((state) => state.allVideogamesArray);\n    useEffect(() => {\n        if (allVideogamesArray.length > 0) {\n            console.log(\n                \"allVideogamesArray is now filled:\",\n                typeof allVideogamesArray\n            );\n        }\n    }, [allVideogamesArray]);\n    const [pages, setPages] = useState(\n        Math.ceil(allVideogamesArray.length / 15)\n    );\n\n    const onSearch = async (name) => {\n        try {\n            const response = await axios(`videogames/search/?name=${name}`);\n            const data = response.data;\n\n            if (!data.length) {\n                window.alert(\"Try another name!\");\n            } else {\n                dispatch(updateRenderArray(data));\n            }\n        } catch (error) {\n            console.error(\"Error fetching search results:\", error);\n            window.alert(\"no videgames found\");\n        }\n    };\n\n    const handleGenresChange = (event) => {\n        setSelectedGenre(event.target.value);\n    };\n\n    const handleSelectedSortOptionChange = (event) => {\n        setSelectedSort(event.target.value);\n    };\n\n    const handleDataSourceChange = (event) => {\n        setSelectedSource(event.target.value);\n    };\n\n    const handleLast = () => {\n        setPage(pages);\n    };\n\n    const handleNext = () => {\n        setPage(page + 1);\n    };\n\n    const handlePrev = () => {\n        setPage(page - 1);\n    };\n\n    const handleFirst = () => {\n        setPage(1);\n    };\n\n    let midRender = toRenderArray || allVideogamesArray;\n\n    if (selectedGenre !== \"all\" && selectedGenre !== \"\") {\n        midRender = midRender.filter((game) => {\n            return game.genres.some((genre) => genre.name === selectedGenre);\n        });\n    }\n\n    switch (selectedSort) {\n        case \"RatingD\":\n            midRender = midRender.sort((a, b) => b.rating - a.rating);\n            break;\n        case \"RatingA\":\n            midRender = midRender.sort((a, b) => a.rating - b.rating);\n            break;\n        case \"AlfaA\":\n            midRender = midRender.sort((a, b) => b.name.localeCompare(a.name));\n            break;\n        case \"AlfaD\":\n            midRender = midRender.sort((a, b) => a.name.localeCompare(b.name));\n            break;\n        case \"default\":\n            midRender = allVideogamesArray;\n            break;\n        default:\n            break;\n    }\n\n    switch (selectedSource) {\n        case \"DB\":\n            midRender = midRender.filter((game) => typeof game.id == \"string\");\n            break;\n        case \"API\":\n            midRender = midRender.filter((game) => typeof game.id == \"number\");\n            break;\n        case \"all\":\n            midRender = allVideogamesArray;\n            break;\n        default:\n            break;\n    }\n    console.log(\"midRender:\", midRender);\n    let finalRender = midRender.slice(page * 15 - 15, page * 15);\n\n    useEffect(() => {\n        setPages(Math.ceil(allVideogamesArray.length / 15));\n    }, [finalRender, allVideogamesArray.length]);\n    return (\n        <main className={style.main}>\n            <Nav\n                handleGenresChange={handleGenresChange}\n                handleSelectedSortOptionChange={handleSelectedSortOptionChange}\n                handleDataSourceChange={handleDataSourceChange}\n                onSearch={onSearch}\n            />\n\n            <section className={style.cards}>\n                {allVideogamesArray.length ? (\n                    finalRender.map(\n                        ({ id, name, genres, background_image, image }) => (\n                            <div\n                                className={style.card}\n                                key={id}>\n                                <Card\n                                    id={id}\n                                    name={name}\n                                    genres={genres}\n                                    image={background_image || image}\n                                />\n                            </div>\n                        )\n                    )\n                ) : (\n                    <div className={style.loading}>LOADING</div>\n                )}\n            </section>\n\n            <section className={style.paginado}>\n                {page !== 1 && (\n                    <button\n                        className={style.btn}\n                        onClick={handleFirst}>\n                        ⇤\n                    </button>\n                )}\n                {page !== 1 && page !== 2 && (\n                    <button\n                        className={style.btn}\n                        onClick={handlePrev}>\n                        ←\n                    </button>\n                )}\n                {page !== pages && page !== pages - 1 && (\n                    <button\n                        className={style.btn}\n                        onClick={handleNext}>\n                        →\n                    </button>\n                )}\n                {page !== pages && (\n                    <button\n                        className={style.btn}\n                        onClick={handleLast}>\n                        ⇥\n                    </button>\n                )}\n            </section>\n        </main>\n    );\n};\nexport default Cards;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}